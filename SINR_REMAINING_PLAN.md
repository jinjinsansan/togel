# SINRå®Ÿè£… æ®‹ã‚Šã®è¨ˆç”»æ›¸

## ç¾åœ¨ã®çŠ¶æ…‹
- âœ… **ãƒ•ã‚§ãƒ¼ã‚º0å®Œäº†ï¼š** ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ä½œæˆæ¸ˆã¿ï¼ˆ472ä»¶ç¢ºèªï¼‰
- ğŸ“ **ç¾åœ¨åœ°ï¼š** ãƒ•ã‚§ãƒ¼ã‚º1ï¼ˆãƒ™ãƒ¼ã‚¹ãƒ©ã‚¤ãƒ³æ¸¬å®šï¼‰ã‹ã‚‰é–‹å§‹

---

## ãƒ•ã‚§ãƒ¼ã‚º1ï¼šãƒ™ãƒ¼ã‚¹ãƒ©ã‚¤ãƒ³æ€§èƒ½æ¸¬å®š

**ç›®çš„ï¼š** æ”¹å–„å‰ã®æ€§èƒ½ã‚’è¨˜éŒ²ã—ã€å¾Œã§æ¯”è¼ƒã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹

**æ‰€è¦æ™‚é–“ï¼š** 30åˆ†

**ãƒªã‚¹ã‚¯ï¼š** ãªã—ï¼ˆæ¸¬å®šã®ã¿ï¼‰

### å®Ÿæ–½å†…å®¹

#### ãƒ†ã‚¹ãƒˆã‚¯ã‚¨ãƒªï¼ˆ5ã¤ï¼‰

æ–°ã—ã„ãƒãƒ£ãƒƒãƒˆã§ä»¥ä¸‹ã®è³ªå•ã‚’1ã¤ãšã¤æŠ•ã’ã‚‹ï¼š

```
1. ã€Œææ€–ã‚’æ„Ÿã˜ã‚‹æ™‚ã¯ã©ã†ã™ã‚Œã°ã„ã„ï¼Ÿã€
2. ã€Œæ€’ã‚Šã®ä¸‹ã«ã‚ã‚‹æ„Ÿæƒ…ã¯ä½•ã§ã™ã‹ï¼Ÿã€
3. ã€Œã‚¢ãƒ©ã‚¸ãƒ³ã®ãƒ©ãƒ³ãƒ—ãƒ†ã‚¹ãƒˆã¨ã¯ä½•ã§ã™ã‹ï¼Ÿã€
4. ã€Œäº”å¤§ãƒã‚¬ãƒ†ã‚£ãƒ–ã¨ã¯ä½•ã§ã™ã‹ï¼Ÿã€
5. ã€Œãƒ”ãƒ¼ãƒ«ãƒ€ã‚¦ãƒ³ã®æ–¹æ³•ã‚’æ•™ãˆã¦ãã ã•ã„ã€
```

#### è¨˜éŒ²ã™ã‚‹é …ç›®

å„ã‚¯ã‚¨ãƒªã«ã¤ã„ã¦ä»¥ä¸‹ã‚’è¨˜éŒ²ï¼š

| é …ç›® | è©•ä¾¡æ–¹æ³• |
|------|---------|
| **ãƒ’ãƒƒãƒˆä»¶æ•°** | ä½•å€‹ã®ãƒãƒ£ãƒ³ã‚¯ãŒæ¤œç´¢ã•ã‚ŒãŸã‹ï¼ˆé–‹ç™ºè€…ãƒ„ãƒ¼ãƒ«ã§ç¢ºèªå¯èƒ½ï¼‰ |
| **é–¢é€£æ€§** | è¿”ã£ã¦ããŸå†…å®¹ã¯è³ªå•ã«é–¢é€£ã—ã¦ã„ã‚‹ã‹ï¼ˆ1-5ç‚¹ï¼‰ |
| **æ–‡è„ˆã®ä¸€è²«æ€§** | æ–‡ç« ãŒé€”ä¸­ã§åˆ‡ã‚Œã¦ã„ãªã„ã‹ï¼ˆ1-5ç‚¹ï¼‰ |
| **å›ç­”ã®å“è³ª** | å…¨ä½“ã¨ã—ã¦è‰¯ã„å›ç­”ã‹ï¼ˆ1-5ç‚¹ï¼‰ |

#### è¨˜éŒ²ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ

```
## ãƒ™ãƒ¼ã‚¹ãƒ©ã‚¤ãƒ³æ¸¬å®šçµæœï¼ˆ2025/12/06ï¼‰

### ã‚¯ã‚¨ãƒª1ï¼šã€Œææ€–ã‚’æ„Ÿã˜ã‚‹æ™‚ã¯ã©ã†ã™ã‚Œã°ã„ã„ï¼Ÿã€
- ãƒ’ãƒƒãƒˆä»¶æ•°: Xä»¶
- é–¢é€£æ€§: X/5ç‚¹
- æ–‡è„ˆä¸€è²«æ€§: X/5ç‚¹
- å›ç­”å“è³ª: X/5ç‚¹
- ãƒ¡ãƒ¢: ï¼ˆæ°—ã¥ã„ãŸç‚¹ãŒã‚ã‚Œã°ï¼‰

### ã‚¯ã‚¨ãƒª2ï¼šã€Œæ€’ã‚Šã®ä¸‹ã«ã‚ã‚‹æ„Ÿæƒ…ã¯ä½•ã§ã™ã‹ï¼Ÿã€
- ãƒ’ãƒƒãƒˆä»¶æ•°: Xä»¶
- é–¢é€£æ€§: X/5ç‚¹
- æ–‡è„ˆä¸€è²«æ€§: X/5ç‚¹
- å›ç­”å“è³ª: X/5ç‚¹
- ãƒ¡ãƒ¢:

ï¼ˆä»¥ä¸‹åŒæ§˜ï¼‰

### å…¨ä½“ã®å¹³å‡ã‚¹ã‚³ã‚¢
- é–¢é€£æ€§å¹³å‡: X.X/5ç‚¹
- æ–‡è„ˆä¸€è²«æ€§å¹³å‡: X.X/5ç‚¹
- å›ç­”å“è³ªå¹³å‡: X.X/5ç‚¹
```

### âœ… å®Œäº†æ¡ä»¶
- [ ] 5ã¤ã®ã‚¯ã‚¨ãƒªå…¨ã¦ã‚’ãƒ†ã‚¹ãƒˆæ¸ˆã¿
- [ ] å„ã‚¯ã‚¨ãƒªã®è©•ä¾¡ã‚’è¨˜éŒ²æ¸ˆã¿
- [ ] ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆã‚’ä¿å­˜æ¸ˆã¿ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰

### ğŸ”„ æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—
ãƒ•ã‚§ãƒ¼ã‚º2ï¼ˆSINRãƒ†ãƒ¼ãƒ–ãƒ«è¿½åŠ ï¼‰ã«é€²ã‚€

---

## ãƒ•ã‚§ãƒ¼ã‚º2ï¼šSINRãƒ†ãƒ¼ãƒ–ãƒ«è¿½åŠ 

**ç›®çš„ï¼š** è¦ªå­ãƒãƒ£ãƒ³ã‚¯æ§‹é€ ã®ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’è¿½åŠ ï¼ˆæ—¢å­˜ãƒ‡ãƒ¼ã‚¿ã¯è§¦ã‚‰ãªã„ï¼‰

**æ‰€è¦æ™‚é–“ï¼š** 5åˆ†

**ãƒªã‚¹ã‚¯ï¼š** ä½ï¼ˆæ–°è¦ãƒ†ãƒ¼ãƒ–ãƒ«è¿½åŠ ã®ã¿ï¼‰

### å®Ÿæ–½å†…å®¹

#### ã‚¹ãƒ†ãƒƒãƒ—1ï¼šãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³å®Ÿè¡Œ

Supabase SQL Editorã§ä»¥ä¸‹ã‚’å®Ÿè¡Œï¼š

```sql
-- supabase/migrations/20251207_add_sinr_tables.sql ã®å†…å®¹ã‚’ã‚³ãƒ”ãƒš
```

<details>
<summary>ğŸ“‹ å®Ÿè¡Œã™ã‚‹SQLå…¨æ–‡ã‚’è¡¨ç¤º</summary>

```sql
-- SINRæ‰‹æ³•å®Ÿè£…ï¼šè¦ªå­ãƒ†ãƒ¼ãƒ–ãƒ«æ§‹é€ ã®è¿½åŠ 
-- 
-- ã“ã®å¤‰æ›´ã¯æ—¢å­˜ã®michelle_knowledgeãƒ†ãƒ¼ãƒ–ãƒ«ã«å½±éŸ¿ã‚’ä¸ãˆã¾ã›ã‚“
-- æ–°ã—ã„ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’è¿½åŠ ã™ã‚‹ã ã‘ã§ã™

BEGIN;

-- è¦ªãƒãƒ£ãƒ³ã‚¯ï¼ˆLLMã«æ¸¡ã™ç”¨ãƒ»å¤§ãã„ãƒãƒ£ãƒ³ã‚¯ï¼‰
CREATE TABLE IF NOT EXISTS michelle_knowledge_parents (
  id uuid PRIMARY KEY DEFAULT gen_random_uuid(),
  content text NOT NULL,
  source text NOT NULL,           -- ãƒ•ã‚¡ã‚¤ãƒ«åï¼ˆä¾‹: 01_gairon/tape_shinrigaku_toha.mdï¼‰
  parent_index integer NOT NULL,  -- åŒã˜ã‚½ãƒ¼ã‚¹å†…ã§ã®é †ç•ª
  metadata jsonb,
  created_at timestamptz NOT NULL DEFAULT timezone('utc', now())
);

-- å­ãƒãƒ£ãƒ³ã‚¯ï¼ˆæ¤œç´¢ç”¨ãƒ»å°ã•ã„ãƒãƒ£ãƒ³ã‚¯ï¼‰
CREATE TABLE IF NOT EXISTS michelle_knowledge_children (
  id uuid PRIMARY KEY DEFAULT gen_random_uuid(),
  parent_id uuid NOT NULL REFERENCES michelle_knowledge_parents(id) ON DELETE CASCADE,
  content text NOT NULL,
  embedding vector(1536),         -- æ¤œç´¢ç”¨ãƒ™ã‚¯ãƒˆãƒ«
  child_index integer NOT NULL,   -- è¦ªã®ä¸­ã§ã®é †ç•ª
  metadata jsonb,
  created_at timestamptz NOT NULL DEFAULT timezone('utc', now())
);

-- ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ä½œæˆ
CREATE INDEX IF NOT EXISTS michelle_knowledge_parents_source_idx 
  ON michelle_knowledge_parents(source);

CREATE INDEX IF NOT EXISTS michelle_knowledge_children_parent_idx 
  ON michelle_knowledge_children(parent_id);

CREATE INDEX IF NOT EXISTS michelle_knowledge_children_embedding_idx
  ON michelle_knowledge_children USING ivfflat (embedding vector_cosine_ops) WITH (lists = 100);

-- RLSè¨­å®šï¼ˆæ—¢å­˜ã¨åŒã˜ãƒãƒªã‚·ãƒ¼ï¼‰
ALTER TABLE michelle_knowledge_parents ENABLE ROW LEVEL SECURITY;
ALTER TABLE michelle_knowledge_children ENABLE ROW LEVEL SECURITY;

CREATE POLICY michelle_knowledge_parents_service_role
  ON michelle_knowledge_parents
  FOR ALL USING (auth.role() = 'service_role') WITH CHECK (auth.role() = 'service_role');

CREATE POLICY michelle_knowledge_children_service_role
  ON michelle_knowledge_children
  FOR ALL USING (auth.role() = 'service_role') WITH CHECK (auth.role() = 'service_role');

-- SINRæ¤œç´¢é–¢æ•°ï¼šå­ã§æ¤œç´¢â†’è¦ªã‚’è¿”ã™
CREATE OR REPLACE FUNCTION match_michelle_knowledge_sinr(
  query_embedding vector(1536),
  match_count int DEFAULT 5,
  similarity_threshold double precision DEFAULT 0.65
)
RETURNS TABLE (
  parent_id uuid,
  parent_content text,
  parent_metadata jsonb,
  parent_source text,
  child_similarity double precision
)
LANGUAGE sql
STABLE
AS $$
  -- å­ãƒãƒ£ãƒ³ã‚¯ã§æ¤œç´¢ã—ã¦ã€è¦ªãƒãƒ£ãƒ³ã‚¯ã‚’è¿”ã™
  -- åŒã˜è¦ªãŒè¤‡æ•°ã®å­ã§ãƒ’ãƒƒãƒˆã—ãŸå ´åˆã€æœ€ã‚‚é¡ä¼¼åº¦ãŒé«˜ã„ã‚‚ã®ã‚’æ¡ç”¨
  SELECT DISTINCT ON (p.id)
    p.id as parent_id,
    p.content as parent_content,
    p.metadata as parent_metadata,
    p.source as parent_source,
    1 - (c.embedding <=> query_embedding) as child_similarity
  FROM michelle_knowledge_children c
  JOIN michelle_knowledge_parents p ON c.parent_id = p.id
  WHERE c.embedding IS NOT NULL
    AND 1 - (c.embedding <=> query_embedding) >= similarity_threshold
  ORDER BY p.id, c.embedding <=> query_embedding
  LIMIT match_count;
$$;

COMMIT;

-- ç¢ºèªç”¨ã‚¯ã‚¨ãƒª
SELECT 
  'michelle_knowledge_parents' as table_name,
  COUNT(*) as record_count
FROM michelle_knowledge_parents
UNION ALL
SELECT 
  'michelle_knowledge_children' as table_name,
  COUNT(*) as record_count
FROM michelle_knowledge_children
UNION ALL
SELECT 
  'michelle_knowledge (original)' as table_name,
  COUNT(*) as record_count
FROM michelle_knowledge;
```

</details>

#### ã‚¹ãƒ†ãƒƒãƒ—2ï¼šçµæœç¢ºèª

å®Ÿè¡Œå¾Œã€ä»¥ä¸‹ã®ã‚ˆã†ãªçµæœãŒè¡¨ç¤ºã•ã‚Œã‚‹ã¯ãšï¼š

```json
[
  {
    "table_name": "michelle_knowledge_parents",
    "record_count": 0
  },
  {
    "table_name": "michelle_knowledge_children",
    "record_count": 0
  },
  {
    "table_name": "michelle_knowledge (original)",
    "record_count": 472
  }
]
```

**ç¢ºèªãƒã‚¤ãƒ³ãƒˆï¼š**
- æ–°ãƒ†ãƒ¼ãƒ–ãƒ«ã¯`0ä»¶`ï¼ˆã¾ã ãƒ‡ãƒ¼ã‚¿ã‚’å…¥ã‚Œã¦ã„ãªã„ãŸã‚ï¼‰
- æ—¢å­˜ãƒ†ãƒ¼ãƒ–ãƒ«ã¯`472ä»¶`ã®ã¾ã¾ï¼ˆç„¡å‚·ï¼‰

#### ã‚¹ãƒ†ãƒƒãƒ—3ï¼šé–¢æ•°ç¢ºèª

```sql
SELECT proname 
FROM pg_proc 
WHERE proname = 'match_michelle_knowledge_sinr';
```

é–¢æ•°ãŒå­˜åœ¨ã™ã‚‹ã“ã¨ã‚’ç¢ºèªã€‚

### âœ… å®Œäº†æ¡ä»¶
- [ ] ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³å®Ÿè¡ŒæˆåŠŸ
- [ ] æ–°ãƒ†ãƒ¼ãƒ–ãƒ«2ã¤ä½œæˆç¢ºèªï¼ˆ0ä»¶ï¼‰
- [ ] æ—¢å­˜ãƒ†ãƒ¼ãƒ–ãƒ«ç„¡å‚·ç¢ºèªï¼ˆ472ä»¶ï¼‰
- [ ] æ¤œç´¢é–¢æ•°ä½œæˆç¢ºèª

### ğŸ”„ ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯æ–¹æ³•ï¼ˆå•é¡ŒãŒã‚ã£ãŸå ´åˆï¼‰

```sql
-- supabase/migrations/20251207_rollback_sinr_tables.sql ã‚’å®Ÿè¡Œ
```

### ğŸ”„ æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—
ãƒ•ã‚§ãƒ¼ã‚º3ï¼ˆãƒãƒ£ãƒ³ã‚­ãƒ³ã‚°ã‚¹ã‚¯ãƒªãƒ—ãƒˆé–‹ç™ºï¼‰ã«é€²ã‚€

---

## ãƒ•ã‚§ãƒ¼ã‚º3ï¼šãƒãƒ£ãƒ³ã‚­ãƒ³ã‚°ã‚¹ã‚¯ãƒªãƒ—ãƒˆé–‹ç™º

**ç›®çš„ï¼š** è¦ªå­ãƒãƒ£ãƒ³ã‚¯ã‚’ç”Ÿæˆã™ã‚‹ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’ä½œæˆ

**æ‰€è¦æ™‚é–“ï¼š** 2-3æ™‚é–“ï¼ˆã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ï¼‰

**ãƒªã‚¹ã‚¯ï¼š** ä½ï¼ˆãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™ºã€æœ¬ç•ªãƒ‡ãƒ¼ã‚¿ã«å½±éŸ¿ãªã—ï¼‰

### å®Ÿæ–½å†…å®¹

#### ãƒ•ã‚¡ã‚¤ãƒ«1ï¼š`web/scripts/michelle-knowledge/chunk-sinr.ts`

è¦ªå­ãƒãƒ£ãƒ³ã‚¯ç”Ÿæˆãƒ­ã‚¸ãƒƒã‚¯ï¼š

```typescript
export interface SINRChunkOptions {
  parentSize?: number;      // è¦ªãƒãƒ£ãƒ³ã‚¯ã‚µã‚¤ã‚ºï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: 1500ï¼‰
  childSize?: number;       // å­ãƒãƒ£ãƒ³ã‚¯ã‚µã‚¤ã‚ºï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: 400ï¼‰
  parentOverlap?: number;   // è¦ªã®ã‚ªãƒ¼ãƒãƒ¼ãƒ©ãƒƒãƒ—ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: 300ï¼‰
  childOverlap?: number;    // å­ã®ã‚ªãƒ¼ãƒãƒ¼ãƒ©ãƒƒãƒ—ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: 80ï¼‰
}

export interface ParentChunk {
  content: string;
  index: number;
  children: ChildChunk[];
}

export interface ChildChunk {
  content: string;
  index: number;
}

export function chunkTextSINR(
  text: string,
  options: SINRChunkOptions = {}
): ParentChunk[] {
  const {
    parentSize = 1500,
    childSize = 400,
    parentOverlap = 300,
    childOverlap = 80,
  } = options;

  // 1. è¦ªãƒãƒ£ãƒ³ã‚¯ç”Ÿæˆ
  const parents = chunkText(text, {
    chunkSize: parentSize,
    overlap: parentOverlap,
  });

  // 2. å„è¦ªã‹ã‚‰å­ãƒãƒ£ãƒ³ã‚¯ã‚’ç”Ÿæˆ
  return parents.map((parent) => ({
    content: parent.content,
    index: parent.index,
    children: chunkText(parent.content, {
      chunkSize: childSize,
      overlap: childOverlap,
    }),
  }));
}
```

#### ãƒ•ã‚¡ã‚¤ãƒ«2ï¼š`web/scripts/michelle-knowledge/process-knowledge-sinr.ts`

ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã«ä¿å­˜ã™ã‚‹ã‚¹ã‚¯ãƒªãƒ—ãƒˆï¼š

```typescript
import { chunkTextSINR } from "./chunk-sinr";

async function processFileSINR(filePath: string) {
  const relativeSource = sanitizeUnicode(
    path.relative(KNOWLEDGE_DIR, filePath) || path.basename(filePath)
  );
  console.log(`\nğŸ“„ Processing ${relativeSource}`);

  const content = await fs.readFile(filePath, "utf-8");
  const parentChunks = chunkTextSINR(content, {
    parentSize: 1500,
    childSize: 400,
    parentOverlap: 300,
    childOverlap: 80,
  });

  if (parentChunks.length === 0) {
    console.log("  âš ï¸  No content found, skipping.");
    return;
  }

  // æ—¢å­˜ãƒ‡ãƒ¼ã‚¿å‰Šé™¤
  const { error: deleteParentsError } = await supabase
    .from("michelle_knowledge_parents")
    .delete()
    .eq("source", relativeSource);
  if (deleteParentsError) throw deleteParentsError;

  // è¦ªãƒãƒ£ãƒ³ã‚¯ã‚’æŒ¿å…¥
  for (const parentChunk of parentChunks) {
    const { data: parentData, error: parentError } = await supabase
      .from("michelle_knowledge_parents")
      .insert({
        content: sanitizeUnicode(parentChunk.content),
        source: relativeSource,
        parent_index: parentChunk.index,
        metadata: { file_path: relativeSource },
      })
      .select("id")
      .single();

    if (parentError) throw parentError;

    // å­ãƒãƒ£ãƒ³ã‚¯ã‚’æŒ¿å…¥
    const childrenWithEmbeddings = [];
    for (const child of parentChunk.children) {
      const embedding = await embedText(child.content);
      childrenWithEmbeddings.push({
        parent_id: parentData.id,
        content: sanitizeUnicode(child.content),
        embedding: embedding,
        child_index: child.index,
        metadata: {},
      });
    }

    const { error: childError } = await supabase
      .from("michelle_knowledge_children")
      .insert(childrenWithEmbeddings);

    if (childError) throw childError;

    console.log(
      `  âœ… Parent ${parentChunk.index}: ${parentChunk.children.length} children`
    );
  }
}
```

#### ã‚¹ãƒ†ãƒƒãƒ—ï¼šå®Ÿè£…ã¨ãƒ†ã‚¹ãƒˆ

1. **ãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆ**
   - `chunk-sinr.ts`ã‚’ä½œæˆ
   - `process-knowledge-sinr.ts`ã‚’ä½œæˆ

2. **ãƒ­ãƒ¼ã‚«ãƒ«ãƒ†ã‚¹ãƒˆ**
   ```bash
   # 1å€‹ã®ãƒ•ã‚¡ã‚¤ãƒ«ã ã‘ã§è©¦ã™
   node web/scripts/michelle-knowledge/process-knowledge-sinr.ts
   ```

3. **çµæœç¢ºèª**
   ```sql
   SELECT COUNT(*) FROM michelle_knowledge_parents;
   SELECT COUNT(*) FROM michelle_knowledge_children;
   ```

### âœ… å®Œäº†æ¡ä»¶
- [ ] chunk-sinr.ts ä½œæˆå®Œäº†
- [ ] process-knowledge-sinr.ts ä½œæˆå®Œäº†
- [ ] ãƒ­ãƒ¼ã‚«ãƒ«ã§1ãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒ†ã‚¹ãƒˆæˆåŠŸ
- [ ] è¦ªå­ã®é–¢ä¿‚ãŒæ­£ã—ãä¿å­˜ã•ã‚Œã¦ã„ã‚‹

### ğŸ”„ æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—
ãƒ•ã‚§ãƒ¼ã‚º4ï¼ˆå°è¦æ¨¡ãƒ†ã‚¹ãƒˆï¼‰ã«é€²ã‚€

---

## ãƒ•ã‚§ãƒ¼ã‚º4ï¼šå°è¦æ¨¡ãƒ†ã‚¹ãƒˆï¼ˆ10ãƒ•ã‚¡ã‚¤ãƒ«ï¼‰

**ç›®çš„ï¼š** å°‘æ•°ã®ãƒ•ã‚¡ã‚¤ãƒ«ã§å‹•ä½œç¢ºèª

**æ‰€è¦æ™‚é–“ï¼š** 30åˆ†ï¼ˆå®Ÿè¡Œï¼‰ + 1é€±é–“ï¼ˆè¦³å¯Ÿï¼‰

**ãƒªã‚¹ã‚¯ï¼š** ä½ï¼ˆ10ãƒ•ã‚¡ã‚¤ãƒ«ã®ã¿ã€ã™ãã«æˆ»ã›ã‚‹ï¼‰

### å®Ÿæ–½å†…å®¹

#### ã‚¹ãƒ†ãƒƒãƒ—1ï¼š10ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é¸ã¶

ä»£è¡¨çš„ãªãƒ•ã‚¡ã‚¤ãƒ«ã‚’é¸æŠï¼š

```
1. counseling_nagare.mdï¼ˆæœ€é‡è¦ï¼‰
2. godai_negative.mdï¼ˆäº”å¤§ãƒã‚¬ãƒ†ã‚£ãƒ–ï¼‰
3. gum_tape.mdï¼ˆã‚¬ãƒ ãƒ†ãƒ¼ãƒ—ï¼‰
4. aladdin_lamp.mdï¼ˆã‚¢ãƒ©ã‚¸ãƒ³ã®ãƒ©ãƒ³ãƒ—ï¼‰
5. peel_down.mdï¼ˆãƒ”ãƒ¼ãƒ«ãƒ€ã‚¦ãƒ³ï¼‰
6. tape_shinrigaku_toha.mdï¼ˆãƒ†ãƒ¼ãƒ—å¼å¿ƒç†å­¦ã¨ã¯ï¼‰
7. negative_hassei_3step.mdï¼ˆãƒã‚¬ãƒ†ã‚£ãƒ–ç™ºç”Ÿ3ã‚¹ãƒ†ãƒƒãƒ—ï¼‰
8. naritai_watashi.mdï¼ˆãªã‚ŠãŸã„ç§ï¼‰
9. inner_child_gainen.mdï¼ˆã‚¤ãƒ³ãƒŠãƒ¼ãƒãƒ£ã‚¤ãƒ«ãƒ‰ï¼‰
10. godai_negative_hagashikata.mdï¼ˆäº”å¤§ãƒã‚¬ãƒ†ã‚£ãƒ–ã®å‰¥ãŒã—æ–¹ï¼‰
```

#### ã‚¹ãƒ†ãƒƒãƒ—2ï¼šSINRå½¢å¼ã§ã‚¤ãƒ³ãƒãƒ¼ãƒˆ

```bash
# 10ãƒ•ã‚¡ã‚¤ãƒ«ã ã‘å‡¦ç†
node web/scripts/michelle-knowledge/process-knowledge-sinr.ts --files 10
```

#### ã‚¹ãƒ†ãƒƒãƒ—3ï¼šRAGã‚³ãƒ¼ãƒ‰ã«åˆ‡ã‚Šæ›¿ãˆãƒ­ã‚¸ãƒƒã‚¯è¿½åŠ 

`web/src/lib/michelle/rag.ts`ã«è¿½åŠ ï¼š

```typescript
// ç’°å¢ƒå¤‰æ•°ã§åˆ¶å¾¡
const USE_SINR = process.env.NEXT_PUBLIC_USE_SINR === "true";

export async function retrieveKnowledgeMatches(
  text: string,
  options: RetrieveOptions = {}
): Promise<KnowledgeMatch[]> {
  if (USE_SINR) {
    return await retrieveKnowledgeMatchesSINR(text, options);
  } else {
    return await retrieveKnowledgeMatchesOld(text, options);
  }
}

// SINRæ¤œç´¢é–¢æ•°
async function retrieveKnowledgeMatchesSINR(
  text: string,
  options: RetrieveOptions = {}
): Promise<KnowledgeMatch[]> {
  const embedding = await embedText(text);
  if (!embedding.length) {
    return [];
  }

  const supabase = createSupabaseAdminClient();
  const rpcArgs = {
    query_embedding: embedding,
    match_count: options.matchCount ?? 8,
    similarity_threshold: options.similarityThreshold ?? 0.65,
  };

  const { data, error } = await supabase.rpc(
    "match_michelle_knowledge_sinr",
    rpcArgs as never
  );

  if (error) {
    console.error("match_michelle_knowledge_sinr error", error);
    return [];
  }

  // è¦ªãƒãƒ£ãƒ³ã‚¯ã‚’KnowledgeMatchå½¢å¼ã«å¤‰æ›
  return (data ?? []).map((item: any) => ({
    id: item.parent_id,
    content: item.parent_content,
    metadata: item.parent_metadata,
    similarity: item.child_similarity,
  }));
}

// æ—§æ¤œç´¢é–¢æ•°ï¼ˆãƒªãƒãƒ¼ãƒ ï¼‰
async function retrieveKnowledgeMatchesOld(
  text: string,
  options: RetrieveOptions = {}
): Promise<KnowledgeMatch[]> {
  // æ—¢å­˜ã®ã‚³ãƒ¼ãƒ‰ã‚’ãã®ã¾ã¾
  // ...
}
```

#### ã‚¹ãƒ†ãƒƒãƒ—4ï¼šA/Bãƒ†ã‚¹ãƒˆï¼ˆ1é€±é–“ï¼‰

```bash
# .env.local
# SINRç„¡åŠ¹ï¼ˆæ—§ã‚·ã‚¹ãƒ†ãƒ ï¼‰
NEXT_PUBLIC_USE_SINR=false

# ã¾ãŸã¯

# SINRæœ‰åŠ¹ï¼ˆæ–°ã‚·ã‚¹ãƒ†ãƒ ï¼‰
NEXT_PUBLIC_USE_SINR=true
```

æ—¥æ›¿ã‚ã‚Šã§åˆ‡ã‚Šæ›¿ãˆã¦æ¯”è¼ƒï¼š
- æœˆãƒ»æ°´ãƒ»é‡‘ï¼šSINRæœ‰åŠ¹
- ç«ãƒ»æœ¨ãƒ»åœŸï¼šSINRç„¡åŠ¹
- æ—¥ï¼šå¥½ããªæ–¹

#### ã‚¹ãƒ†ãƒƒãƒ—5ï¼šãƒ­ã‚°è¨˜éŒ²

ä¸¡æ–¹ã®çµæœã‚’ãƒ­ã‚°ã«è¨˜éŒ²ï¼š

```typescript
console.log("Search method:", USE_SINR ? "SINR" : "Old");
console.log("Matches found:", matches.length);
console.log("Query:", text);
```

### âœ… å®Œäº†æ¡ä»¶
- [ ] 10ãƒ•ã‚¡ã‚¤ãƒ«ãŒSINRå½¢å¼ã§ã‚¤ãƒ³ãƒãƒ¼ãƒˆæ¸ˆã¿
- [ ] åˆ‡ã‚Šæ›¿ãˆãƒ­ã‚¸ãƒƒã‚¯å®Ÿè£…æ¸ˆã¿
- [ ] 1é€±é–“ã®A/Bãƒ†ã‚¹ãƒˆå®Œäº†
- [ ] ä¸¡æ–¹ã®çµæœã‚’ãƒ­ã‚°ã§æ¯”è¼ƒæ¸ˆã¿

### ğŸ“Š åˆ¤æ–­åŸºæº–

**SINRæ¡ç”¨ã®æ¡ä»¶ï¼š**
- ãƒ’ãƒƒãƒˆæ•°ãŒé©åˆ‡ï¼ˆå¤šã™ããšå°‘ãªã™ããšï¼‰
- æ–‡è„ˆã®ä¸€è²«æ€§ãŒå‘ä¸Šã—ã¦ã„ã‚‹
- å›ç­”ã®å“è³ªãŒç¶­æŒã¾ãŸã¯å‘ä¸Š
- ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¦ã„ãªã„

**æ—§ã‚·ã‚¹ãƒ†ãƒ ã«æˆ»ã™æ¡ä»¶ï¼š**
- æ¤œç´¢ç²¾åº¦ãŒæ˜ã‚‰ã‹ã«æ‚ªåŒ–
- ã‚¨ãƒ©ãƒ¼ãŒé »ç™º
- å›ç­”ã®å“è³ªãŒä½ä¸‹

### ğŸ”„ æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—
- æˆåŠŸ â†’ ãƒ•ã‚§ãƒ¼ã‚º5ï¼ˆå…¨ãƒ•ã‚¡ã‚¤ãƒ«ç§»è¡Œï¼‰
- å¤±æ•— â†’ ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯ã€å†æ¤œè¨

---

## ãƒ•ã‚§ãƒ¼ã‚º5ï¼šå…¨ãƒ•ã‚¡ã‚¤ãƒ«ç§»è¡Œ

**ç›®çš„ï¼š** å…¨85ãƒ•ã‚¡ã‚¤ãƒ«ã‚’SINRå½¢å¼ã«å¤‰æ›

**æ‰€è¦æ™‚é–“ï¼š** 1æ™‚é–“ï¼ˆå®Ÿè¡Œï¼‰ + 2é€±é–“ï¼ˆè¦³å¯Ÿï¼‰

**ãƒªã‚¹ã‚¯ï¼š** ä¸­ï¼ˆå…¨ãƒ‡ãƒ¼ã‚¿å¤‰æ›ã€ãŸã ã—ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯å¯èƒ½ï¼‰

### å®Ÿæ–½å†…å®¹

#### ã‚¹ãƒ†ãƒƒãƒ—1ï¼šå…¨ãƒ•ã‚¡ã‚¤ãƒ«å¤‰æ›

```bash
# å…¨ãƒ•ã‚¡ã‚¤ãƒ«å‡¦ç†
node web/scripts/michelle-knowledge/process-knowledge-sinr.ts --all
```

#### ã‚¹ãƒ†ãƒƒãƒ—2ï¼šãƒ‡ãƒ¼ã‚¿ç¢ºèª

```sql
-- è¦ªãƒãƒ£ãƒ³ã‚¯æ•°
SELECT COUNT(*) FROM michelle_knowledge_parents;

-- å­ãƒãƒ£ãƒ³ã‚¯æ•°
SELECT COUNT(*) FROM michelle_knowledge_children;

-- è¦ªã‚ãŸã‚Šã®å­ã®å¹³å‡æ•°
SELECT AVG(child_count) as avg_children_per_parent
FROM (
  SELECT parent_id, COUNT(*) as child_count
  FROM michelle_knowledge_children
  GROUP BY parent_id
) subquery;
```

#### ã‚¹ãƒ†ãƒƒãƒ—3ï¼šãƒ•ã‚§ãƒ¼ã‚º1ã®ãƒ†ã‚¹ãƒˆã‚’å†å®Ÿè¡Œ

ãƒ™ãƒ¼ã‚¹ãƒ©ã‚¤ãƒ³ã¨åŒã˜5ã¤ã®ã‚¯ã‚¨ãƒªã‚’å®Ÿè¡Œï¼š

```
1. ã€Œææ€–ã‚’æ„Ÿã˜ã‚‹æ™‚ã¯ã©ã†ã™ã‚Œã°ã„ã„ï¼Ÿã€
2. ã€Œæ€’ã‚Šã®ä¸‹ã«ã‚ã‚‹æ„Ÿæƒ…ã¯ä½•ã§ã™ã‹ï¼Ÿã€
3. ã€Œã‚¢ãƒ©ã‚¸ãƒ³ã®ãƒ©ãƒ³ãƒ—ãƒ†ã‚¹ãƒˆã¨ã¯ä½•ã§ã™ã‹ï¼Ÿã€
4. ã€Œäº”å¤§ãƒã‚¬ãƒ†ã‚£ãƒ–ã¨ã¯ä½•ã§ã™ã‹ï¼Ÿã€
5. ã€Œãƒ”ãƒ¼ãƒ«ãƒ€ã‚¦ãƒ³ã®æ–¹æ³•ã‚’æ•™ãˆã¦ãã ã•ã„ã€
```

#### ã‚¹ãƒ†ãƒƒãƒ—4ï¼šæ¯”è¼ƒåˆ†æ

| é …ç›® | ãƒ™ãƒ¼ã‚¹ãƒ©ã‚¤ãƒ³ | SINR | å¤‰åŒ– |
|------|------------|------|------|
| é–¢é€£æ€§å¹³å‡ | X.X/5 | X.X/5 | +X.X |
| æ–‡è„ˆä¸€è²«æ€§å¹³å‡ | X.X/5 | X.X/5 | +X.X |
| å›ç­”å“è³ªå¹³å‡ | X.X/5 | X.X/5 | +X.X |

#### ã‚¹ãƒ†ãƒƒãƒ—5ï¼š2é€±é–“ã®æœ¬ç•ªé‹ç”¨

```bash
# .env.local
NEXT_PUBLIC_USE_SINR=true
```

æ¯æ—¥ã®ç¢ºèªé …ç›®ï¼š
- [ ] ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°ã‚’ç¢ºèª
- [ ] ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‹ã‚‰ã®å•ã„åˆã‚ã›ã‚’ç¢ºèª
- [ ] å›ç­”ã®å“è³ªã‚’æŠœãæ‰“ã¡ãƒã‚§ãƒƒã‚¯

### âœ… å®Œäº†æ¡ä»¶
- [ ] å…¨85ãƒ•ã‚¡ã‚¤ãƒ«å¤‰æ›å®Œäº†
- [ ] ãƒ†ã‚¹ãƒˆã‚¯ã‚¨ãƒªã§ãƒ™ãƒ¼ã‚¹ãƒ©ã‚¤ãƒ³ä»¥ä¸Šã®æ€§èƒ½
- [ ] 2é€±é–“ã‚¨ãƒ©ãƒ¼ãªã—
- [ ] ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯è‰¯å¥½

### ğŸ“Š æˆåŠŸã®æŒ‡æ¨™

**å®šé‡çš„ï¼š**
- æ¤œç´¢ç²¾åº¦ï¼š+15%ä»¥ä¸Šï¼ˆè«–æ–‡ã§ã¯+15-25%ï¼‰
- æ–‡è„ˆä¸€è²«æ€§ï¼š+30%ä»¥ä¸Šï¼ˆè«–æ–‡ã§ã¯+30%ï¼‰
- ãƒ¬ã‚¹ãƒãƒ³ã‚¹æ™‚é–“ï¼šç¶­æŒã¾ãŸã¯æ”¹å–„

**å®šæ€§çš„ï¼š**
- å›ç­”ãŒé€”ä¸­ã§åˆ‡ã‚Œãªã„
- é–¢é€£æƒ…å ±ãŒã‚ˆã‚Šå¤šãå«ã¾ã‚Œã‚‹
- ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æº€è¶³åº¦ãŒç¶­æŒã¾ãŸã¯å‘ä¸Š

### ğŸ”„ æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—
ãƒ•ã‚§ãƒ¼ã‚º6ï¼ˆæ—§ã‚·ã‚¹ãƒ†ãƒ å‰Šé™¤ï¼‰

---

## ãƒ•ã‚§ãƒ¼ã‚º6ï¼šæ—§ã‚·ã‚¹ãƒ†ãƒ å‰Šé™¤

**ç›®çš„ï¼š** æ—§ãƒ‡ãƒ¼ã‚¿ã¨ã‚³ãƒ¼ãƒ‰ã‚’ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—

**æ‰€è¦æ™‚é–“ï¼š** 30åˆ†

**ãƒªã‚¹ã‚¯ï¼š** ä½ï¼ˆãŸã ã—å®Ÿè¡Œå‰ã«æœ€çµ‚ç¢ºèªå¿…é ˆï¼‰

### å®Ÿæ–½å‰ã®ç¢ºèª

**çµ¶å¯¾æ¡ä»¶ï¼š**
- âœ… ãƒ•ã‚§ãƒ¼ã‚º5ã§2é€±é–“ä»¥ä¸Šå•é¡Œãªãå‹•ä½œ
- âœ… ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ãŒè‰¯å¥½
- âœ… ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æŒ‡æ¨™ãŒæ”¹å–„
- âœ… ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯ã®å¿…è¦æ€§ãŒã‚¼ãƒ­

### å®Ÿæ–½å†…å®¹

#### ã‚¹ãƒ†ãƒƒãƒ—1ï¼šæœ€çµ‚ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—

å¿µã®ãŸã‚ã€æ—§ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’ã‚‚ã†ä¸€åº¦ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ï¼š

```sql
CREATE TABLE michelle_knowledge_final_backup AS 
SELECT * FROM michelle_knowledge;
```

#### ã‚¹ãƒ†ãƒƒãƒ—2ï¼šæ—§ãƒ†ãƒ¼ãƒ–ãƒ«å‰Šé™¤

```sql
DROP TABLE IF EXISTS michelle_knowledge CASCADE;
DROP TABLE IF EXISTS michelle_knowledge_backup CASCADE;
```

#### ã‚¹ãƒ†ãƒƒãƒ—3ï¼šæ—§ã‚¹ã‚¯ãƒªãƒ—ãƒˆå‰Šé™¤

```bash
# ãƒ•ã‚¡ã‚¤ãƒ«å‰Šé™¤
rm web/scripts/michelle-knowledge/chunk.ts
rm web/scripts/michelle-knowledge/process-knowledge.ts
```

#### ã‚¹ãƒ†ãƒƒãƒ—4ï¼šã‚³ãƒ¼ãƒ‰ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—

`web/src/lib/michelle/rag.ts`ã‹ã‚‰æ—§ã‚³ãƒ¼ãƒ‰å‰Šé™¤ï¼š

```typescript
// retrieveKnowledgeMatchesOld() ã‚’å‰Šé™¤
// USE_SINR ã®åˆ†å²ã‚’å‰Šé™¤
```

#### ã‚¹ãƒ†ãƒƒãƒ—5ï¼šç’°å¢ƒå¤‰æ•°ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—

```bash
# .env.local ã‹ã‚‰å‰Šé™¤
# NEXT_PUBLIC_USE_SINR=true
```

### âœ… å®Œäº†æ¡ä»¶
- [ ] æ—§ãƒ†ãƒ¼ãƒ–ãƒ«å‰Šé™¤å®Œäº†
- [ ] æ—§ã‚¹ã‚¯ãƒªãƒ—ãƒˆå‰Šé™¤å®Œäº†
- [ ] æ—§ã‚³ãƒ¼ãƒ‰å‰Šé™¤å®Œäº†
- [ ] ç’°å¢ƒå¤‰æ•°ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—å®Œäº†
- [ ] æœ¬ç•ªã§å•é¡Œãªãå‹•ä½œç¢ºèª

---

## å…¨ä½“ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«

| ãƒ•ã‚§ãƒ¼ã‚º | æœŸé–“ | ç´¯ç©æœŸé–“ | çŠ¶æ…‹ |
|---------|------|---------|------|
| 0. ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ— | 10åˆ† | 10åˆ† | âœ… å®Œäº† |
| 1. ãƒ™ãƒ¼ã‚¹ãƒ©ã‚¤ãƒ³æ¸¬å®š | 30åˆ† | 40åˆ† | â³ æ¬¡ |
| 2. ãƒ†ãƒ¼ãƒ–ãƒ«è¿½åŠ  | 5åˆ† | 45åˆ† | ğŸ”² å¾…æ©Ÿ |
| 3. ã‚¹ã‚¯ãƒªãƒ—ãƒˆé–‹ç™º | 2-3æ—¥ | 3æ—¥ | ğŸ”² å¾…æ©Ÿ |
| 4. å°è¦æ¨¡ãƒ†ã‚¹ãƒˆ | 1é€±é–“ | 10æ—¥ | ğŸ”² å¾…æ©Ÿ |
| 5. å…¨ä½“ç§»è¡Œ | 2é€±é–“ | 24æ—¥ | ğŸ”² å¾…æ©Ÿ |
| 6. æ—§ã‚·ã‚¹ãƒ†ãƒ å‰Šé™¤ | 30åˆ† | 24.5æ—¥ | ğŸ”² å¾…æ©Ÿ |

**åˆè¨ˆï¼šç´„1ãƒ¶æœˆ**

---

## ç·Šæ€¥æ™‚ã®å¯¾å¿œ

### ãƒ¬ãƒ™ãƒ«1ï¼šæ©Ÿèƒ½ã‚ªãƒ•ï¼ˆå³åº§ã€ãƒªã‚¹ã‚¯ãªã—ï¼‰

```bash
# .env.local
NEXT_PUBLIC_USE_SINR=false
```

```bash
git add -A
git commit -m "emergency: disable SINR"
git push origin main
```

### ãƒ¬ãƒ™ãƒ«2ï¼šSINRå‰Šé™¤ï¼ˆ5åˆ†ã€ä½ãƒªã‚¹ã‚¯ï¼‰

```sql
-- 20251207_rollback_sinr_tables.sql ã‚’å®Ÿè¡Œ
DROP FUNCTION IF EXISTS match_michelle_knowledge_sinr;
DROP TABLE IF EXISTS michelle_knowledge_children CASCADE;
DROP TABLE IF EXISTS michelle_knowledge_parents CASCADE;
```

### ãƒ¬ãƒ™ãƒ«3ï¼šãƒ‡ãƒ¼ã‚¿å¾©å…ƒï¼ˆ10åˆ†ã€æœ€çµ‚æ‰‹æ®µï¼‰

```sql
-- 20251206_rollback_from_backup.sql ã‚’å®Ÿè¡Œ
TRUNCATE TABLE michelle_knowledge;
INSERT INTO michelle_knowledge SELECT * FROM michelle_knowledge_backup;
```

---

## æˆåŠŸã®å®šç¾©

### å¿…é ˆæ¡ä»¶
- [x] ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ä½œæˆæ¸ˆã¿ï¼ˆãƒ•ã‚§ãƒ¼ã‚º0ï¼‰
- [ ] ãƒ™ãƒ¼ã‚¹ãƒ©ã‚¤ãƒ³æ¸¬å®šå®Œäº†ï¼ˆãƒ•ã‚§ãƒ¼ã‚º1ï¼‰
- [ ] SINRå®Ÿè£…å®Œäº†ï¼ˆãƒ•ã‚§ãƒ¼ã‚º2-5ï¼‰
- [ ] æ¤œç´¢ç²¾åº¦ãŒå‘ä¸Šï¼ˆ+15%ä»¥ä¸Šï¼‰
- [ ] æ–‡è„ˆä¸€è²«æ€§ãŒå‘ä¸Šï¼ˆ+30%ä»¥ä¸Šï¼‰
- [ ] ã‚¨ãƒ©ãƒ¼ç‡ãŒå¢—åŠ ã—ã¦ã„ãªã„
- [ ] ãƒ¦ãƒ¼ã‚¶ãƒ¼æº€è¶³åº¦ãŒç¶­æŒã¾ãŸã¯å‘ä¸Š

### ã‚ªãƒ—ã‚·ãƒ§ãƒ³ç›®æ¨™
- [ ] ãƒ¬ã‚¹ãƒãƒ³ã‚¹æ™‚é–“ãŒæ”¹å–„ï¼ˆ-20-30%ï¼‰
- [ ] ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚µã‚¤ã‚ºãŒå‰Šæ¸›ï¼ˆ-40-60%ï¼‰
- [ ] ã‚³ã‚¹ãƒˆå‰Šæ¸›ï¼ˆãƒ™ã‚¯ãƒˆãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸æ–™é‡‘ï¼‰

---

## æ¬¡ã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³

**ä»Šã™ãï¼š**
- [ ] ãƒ•ã‚§ãƒ¼ã‚º1ï¼ˆãƒ™ãƒ¼ã‚¹ãƒ©ã‚¤ãƒ³æ¸¬å®šï¼‰ã‚’å®Ÿæ–½

**ãã®å¾Œï¼š**
- [ ] Droidã«ã€Œãƒ•ã‚§ãƒ¼ã‚º1å®Œäº†ã€ã¨å ±å‘Š
- [ ] ãƒ•ã‚§ãƒ¼ã‚º2ã«é€²ã‚€ã‹ã©ã†ã‹åˆ¤æ–­

---

## å‚è€ƒè³‡æ–™

- [å…ƒè«–æ–‡] https://arxiv.org/abs/2511.04939
- [Zennè¨˜äº‹] https://zenn.dev/knowledgesense/articles/746ceb4e4dd87e
- [ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—SQL] `supabase/migrations/20251206_backup_michelle_knowledge.sql`
- [ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯SQL] `supabase/migrations/20251206_rollback_from_backup.sql`
- [SINRè¿½åŠ SQL] `supabase/migrations/20251207_add_sinr_tables.sql`
- [SINRå‰Šé™¤SQL] `supabase/migrations/20251207_rollback_sinr_tables.sql`
